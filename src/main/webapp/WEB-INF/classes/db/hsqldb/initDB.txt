/* Create tables */

create table users(
    id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    username varchar_ignorecase(50) NOT NULL,
    password varchar_ignorecase(100) NOT NULL,
    enabled BOOLEAN NOT NULL);

create table authorities (
    id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    user_id INTEGER NOT NULL,
    authority varchar_ignorecase(50) NOT NULL,
    constraint fk_authorities_users foreign key(user_id) references users(id)
);
    
create unique index ix_auth_user_id on authorities
    (user_id, authority);

CREATE TABLE categoria(
	id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	nombre VARCHAR(200) NOT NULL,
	categoriaPadre_id INTEGER NULL,
	usuario_id INTEGER NOT NULL,
	constraint fk_categoria_categoria foreign key(categoriaPadre_id) references categoria(id),
	constraint fk_categoria_users foreign key(usuario_id) references users(id)
);

CREATE TABLE miembro(
	id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	nombre VARCHAR(200) NOT NULL,
	foto BLOB NULL,
	descripcion INTEGER NULL,
	categoria_id INTEGER NOT NULL,
	constraint fk_miembro_categoria foreign key(categoria_id) references categoria(id)
);